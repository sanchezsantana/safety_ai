nodes:
- label: Riesgo
  source_file: 01_catalogo_riesgos_v8.yaml
  unique_property: id
  id_prefix: R
  id_prefix_local: null
  properties:
    - id
    - nombre
    - descripcion
    - bowtie_id
    - area
    - aplicabilidad
    - tags
    - peligro_asociado

- label: Causa
  source_file: 03_catalogo_causas_v4.yaml
  unique_property: id
  id_prefix: R
  id_prefix_local: CA
  properties:
    - id
    - nombre
    - descripcion
    - riesgo_asociado
    - tipo_causa
    - area
    - aplicabilidad
    - registro_aplicable_a
    - tags

- label: Control
  source_file: 02_catalogo_controles_v6.yaml
  unique_property: id
  id_prefix: R
  id_prefix_local:
    - CC
    - CP
    - CM
  descripcion: Controles clasificados como Críticos (CC), Preventivos (CP) y de Mitigación (CM).
  properties:
    - id
    - nombre
    - descripcion
    - tipo_control
    - riesgo_asociado
    - es_critico
    - clase_implementacion
    - aplicabilidad
    - area
    - registro_aplicable_a
    - tags

- label: Consecuencia
  source_file: 04_catalogo_consecuencias_v6.yaml
  unique_property: id
  id_prefix: R
  id_prefix_local: CON
  properties:
    - id
    - nombre
    - descripcion
    - tipo_consecuencia
    - severidad_consecuencia
    - riesgo_asociado
    - aplicabilidad
    - area
    - registro_aplicable_a
    - tags

- label: FactorDegradacion
  source_file: 05_catalogo_factores_degradacion_v3.yaml
  unique_property: id
  id_prefix: R
  id_prefix_local: FD
  properties:
    - id
    - nombre
    - descripcion
    - tipo_factor
    - riesgo_asociado
    - aplicabilidad
    - area
    - registro_aplicable_a
    - tags

- label: BarreraRecuperacion
  source_file: 06_catalogo_barreras_recuperacion_v3.yaml
  unique_property: id
  id_prefix: R
  id_prefix_local: BR
  properties:
    - id
    - nombre
    - descripcion
    - tipo_barrera
    - riesgo_asociado
    - aplicabilidad
    - area
    - registro_aplicable_a
    - tags


- label: Area
  source_file: 13_catalogo_areas_operacionales_v1.yaml
  unique_property: id
  id_prefix: null
  properties:
    - id
    - nombre
    - descripcion
    - area
    - aplicabilidad
    - registro_aplicable_a
    - tags


- label: Rol
  source_file: 10_catalogo_roles_v2.yaml
  unique_property: id
  id_prefix: ROL
  id_prefix_local: null
  properties:
    - id
    - nombre
    - descripcion
    - area_operacional
    - tareas_asociadas
    - factores_exposicion_relacionados
    - epp_requerido

- label: Tarea
  source_file: 12_catalogo_tareas_v1.yaml
  unique_property: id
  id_prefix: null
  id_prefix_local:
    - MRA_TA
    - PLC_TA
    - TME_TA
    - STM_TA
    - PCO_TA
  properties:
    - id
    - nombre_tarea
    - descripcion
    - id_rol
    - riesgos_asociados
    - controles_criticos_asociados
    - factores_de_exposicion
    - necesidades_epp
    - area_operacional

- label: EPP
  source_file: 14_catalogo_epp_v3.yaml
  unique_property: id
  id_prefix: EPP
  id_prefix_local: null
  properties:
    - id
    - nombre
    - descripcion
    - area
    - aplicabilidad
    - registro_aplicable_a
    - tags


- label: FactorExposicion
  source_file: 11_catalogo_factores_exposicion_v3.yaml
  unique_property: id
  id_prefix: FE
  id_prefix_local: null
  properties:
    - id
    - nombre
    - descripcion
    - tareas_asociadas
    - riesgos_asociados
    - roles_asociados
    - areas_asociadas


- label: TipoObservacion
  source_file: 26_tipos_observaciones_v2.yaml
  unique_property: id
  id_prefix: null
  id_prefix_local: 
    - OPG
    - OCC
  id_values:
    - OPG
    - OCC
  properties:
    - id
    - nombre
    - descripcion
    - requiere_control_critico
    - riesgo_opcional
    - observacion_valorativa
    - asociacion_bowtie
    - area
    - aplicabilidad
    - registro_aplicable_a
    - tags

- label: PeligroDetectado
  source_file: 17_catalogo_peligros_detectados_v2.yaml
  unique_property: id
  id_prefix: P
  id_prefix_local: null
  properties:
    - id
    - nombre
    - descripcion
    - riesgo_principal
    - clasificacion
    - area
    - aplicabilidad
    - registro_aplicable_a
    - tags

- label: AccionCorrectiva
  source_file: 19_catalogo_acciones_correctivas_v1.yaml
  unique_property: id
  id_prefix: AC
  id_prefix_local: null
  properties:
    - id
    - nombre
    - descripcion
    - riesgo_asociado
    - tipo_control
    - aplicable_a
    - area
    - aplicabilidad
    - registro_aplicable_a
    - tags

- label: EstructuraObservacion
  source_file: 24_estructura_observaciones_v3.yaml
  unique_property: tipo_observacion
  id_prefix: null
  id_prefix_local: null
  properties:
    - tipo_observacion
    - nombre
    - descripcion
    - metodo_observacion
    - estructura_campos
    - asociacion_bowtie
    - area
    - aplicabilidad
    - registro_aplicable_a
    - tags

- label: TipoIncidente
  source_file: 25_tipos_incidentes_v1.yaml
  unique_property: id
  id_prefix: null
  id_prefix_local:
    - IMAY
    - IMEN
    - NMS
    - PELI
  id_values:
    - IMAY
    - IMEN
    - NMS
    - PELI
  properties:
    - id
    - nombre
    - descripcion
    - formato_analisis_id
    - metodo_analisis_nombre
    - requiere_control_critico
    - asociacion_bowtie
    - campos_obligatorios_reporte
    - ejemplos_consecuencias

- label: EstructuraIncidente
  source_file: 23_estructura_incidentes_v4.yaml
  unique_property: tipo_incidente
  id_prefix: null
  id_prefix_local: null
  properties:
    - tipo_incidente
    - descripcion
    - campos_obligatorios
    - formato_registro_asociado
    - asociacion_bowtie
    - area
    - aplicabilidad
    - registro_aplicable_a
    - tags

- label: FormatoAnalisis
  source_file: 21_formatos_analisis_v3.yaml
  unique_property: id
  id_prefix: null
  id_prefix_local:
    - ICAM
    - 5WHY
    - OBS
  properties:
    - id
    - nombre
    - descripcion
    - aplicabilidad
    - campos_principales
    - area
    - registro_aplicable_a
    - tags

- label: NivelSeveridad
  source_file: 27_catalogo_niveles_severidad_v2.yaml
  unique_property: id
  id_prefix: SEV
  id_prefix_local: null
  properties:
    - id
    - nivel
    - severidad_agrupada
    - descripcion
    - aplicable_a
    - area
    - aplicabilidad
    - registro_aplicable_a
    - tags

- label: EventoPrincipal
  source_file: 18_catalogo_eventos_principales_v2.yaml
  unique_property: id
  id_prefix: EVT
  id_prefix_local: null
  properties:
    - id
    - nombre
    - descripcion
    - riesgo_asociado
    - area
    - aplicabilidad
    - registro_aplicable_a
    - tags

- label: FactorICAM
  source_file: 22_factores_icam_v3.yaml
  unique_property: id
  id_prefix: null
  id_prefix_local: 
    - ORG
    - HUM
    - TAR
    - ENT
    - TEC
  properties:
    - id
    - nombre
    - descripcion
    - metodologia_asociada
    - area
    - aplicabilidad
    - registro_aplicable_a
    - tags
    - ejemplos

- label: Glosario
  source_file: 28_glosario_seguridad_v4.yaml
  unique_property: id
  id_prefix: GLO
  id_prefix_local: null
  properties:
    - id
    - termino
    - definicion
    - contexto_relacionado
    - categoria
    - aplicabilidad
    - area
    - tags

relationships:

- type: ASOCIADA_A_RIESGO
  from_node: Causa
  to_node: Riesgo
  properties:
    - riesgo_asociado
  tipo_relacion: estructural

- type: DERIVA_DE_RIESGO
  from_node: Consecuencia
  to_node: Riesgo
  properties:
    - riesgo_asociado
  tipo_relacion: estructural

- type: PREVIENE_CAUSA_INCIDENTE
  from_node: Control
  to_node: Causa
  properties:
    - causas_que_previene
  tipo_relacion: estructural
  filtro_origen:
    tipo_control: [critico, preventivo]
  cardinalidad: N:M
  inversa:
    type: ES_PREVENIDA_POR
    from_node: Causa
    to_node: Control
  inferencia: Un control crítico o preventivo está diseñado para prevenir una o más causas de incidentes, según el diseño del BowTie asociado al riesgo principal.

- type: MITIGA_CONSECUENCIA
  from_node: Control
  to_node: Consecuencia
  properties:
    - controles_mitigacion_asociados
  tipo_relacion: estructural
  filtro_origen:
    tipo_control: [mitigacion]

- type: AYUDA_RECUPERACION_DE_CONSECUENCIA
  from_node: BarreraRecuperacion
  to_node: Consecuencia
  properties:
    - consecuencias_asociadas
  tipo_relacion: estructural

- type: DEGRADA_CONTROL
  from_node: FactorDegradacion
  to_node: Control
  properties:
    - controles_asociados_criticos_y_preventivos
  tipo_relacion: estructural
  filtro_destino:
    tipo_control: [critico, preventivo]

- type: EJECUTADA_POR
  from_node: Tarea
  to_node: Rol
  properties:
    - id_rol
  tipo_relacion: estructural

- type: RELACIONADA_CON_RIESGO
  from_node: Tarea
  to_node: Riesgo
  properties:
    - riesgos_asociados
  tipo_relacion: estructural

- type: REQUIERE_CONTROL
  from_node: Tarea
  to_node: Control
  properties:
    - controles_criticos_asociados
  tipo_relacion: estructural

- type: RELACIONADA_CON_EXPOSICION
  from_node: Tarea
  to_node: FactorExposicion
  properties:
    - factores_de_exposicion
  tipo_relacion: estructural

- type: REQUIERE_EPP
  from_node: Tarea
  to_node: EPP
  properties:
    - necesidades_epp
  tipo_relacion: estructural

- type: OCURRE_EN_AREA
  from_node: Tarea
  to_node: Area
  properties:
    - area_operacional
  tipo_relacion: estructural

- type: EJECUTA_TAREA
  from_node: Rol
  to_node: Tarea
  properties:
    - tareas_asociadas
  tipo_relacion: estructural

- type: USA_EPP
  from_node: Rol
  to_node: EPP
  properties:
    - epp_requerido
  tipo_relacion: estructural

- type: EXPUESTO_A
  from_node: Rol
  to_node: FactorExposicion
  properties:
    - factores_exposicion_relacionados
  tipo_relacion: estructural

- type: PERTENECE_A_AREA
  from_node: Rol
  to_node: Area
  properties:
    - area_operacional
  tipo_relacion: estructural

- type: CLASIFICADA_COMO
  from_node: Observacion
  to_node: TipoObservacion
  properties:
    - tipo_observacion
  tipo_relacion: observacional
  cardinalidad: 1:1
  inversa:
    type: CLASIFICA_OBSERVACION
    from_node: TipoObservacion
    to_node: Observacion
  inferencia: El tipo de observación determina estructura, criticidad y foco del análisis.

- type: OBSERVA_TAREA
  from_node: Observacion
  to_node: Tarea
  properties:
    - tarea_asociada
  tipo_relacion: observacional

- type: OBSERVA_ROL
  from_node: Observacion
  to_node: Rol
  properties:
    - rol_observador
  tipo_relacion: observacional

- type: RELACIONADA_CON_CONTROL
  from_node: Observacion
  to_node: Control
  properties:
    - controles_relacionados
  tipo_relacion: observacional
  filtro_destino:
    tipo_control: [critico]  # Aplica solo si es una observación de control crítico
  filtro_origen:
    tipo_observacion: [OCC]  # Observación de Control Crítico

- type: OBSERVA_EXPOSICION
  from_node: Observacion
  to_node: FactorExposicion
  properties:
    - factores_exposicion_relacionados
  tipo_relacion: observacional

- type: RELACIONADA_CON_RIESGO
  from_node: Observacion
  to_node: Riesgo
  properties:
    - riesgo_asociado
  tipo_relacion: observacional

- type: CLASIFICADO_COMO
  from_node: Incidente
  to_node: TipoIncidente
  properties:
    - tipo_incidente
  tipo_relacion: observacional
  cardinalidad: 1:1
  inversa:
    type: CATEGORIZA
    from_node: TipoIncidente
    to_node: Incidente
  inferencia: Un incidente debe clasificarse en un tipo según su severidad, consecuencias y estructura de análisis.

- type: ANALIZADO_CON
  from_node: Incidente
  to_node: FormatoAnalisis
  properties:
    - formato_registro_asociado
  tipo_relacion: observacional
  cardinalidad: 1:1
  inversa:
    type: FORMATO_APLICADO_EN
    from_node: FormatoAnalisis
    to_node: Incidente
  inferencia: El análisis del incidente debe seguir un formato asociado al tipo definido y su metodología.

- type: TIENE_SEVERIDAD
  from_node: Incidente
  to_node: NivelSeveridad
  properties:
    - severidad_estimada
  tipo_relacion: observacional

- type: INCLUYE_FACTOR_ICAM
  from_node: Incidente
  to_node: FactorICAM
  properties:
    - factores_contributivos_icam
  tipo_relacion: observacional

- type: GENERA_ACCION
  from_node: Incidente
  to_node: AccionCorrectiva
  properties:
    - acciones_correctivas_implementadas
  tipo_relacion: observacional

- type: RELACIONADO_CON_RIESGO
  from_node: Incidente
  to_node: Riesgo
  properties:
    - riesgo_asociado
  tipo_relacion: observacional

- type: APLICABLE_A
  from_node: FormatoAnalisis
  to_node: TipoIncidente
  properties:
    - aplicabilidad
  tipo_relacion: estructural

- type: DEFINE_ESTRUCTURA
  from_node: EstructuraIncidente
  to_node: TipoIncidente
  properties:
    - tipo_incidente
  tipo_relacion: estructural

- type: DEFINE_ESTRUCTURA
  from_node: EstructuraObservacion
  to_node: TipoObservacion
  properties:
    - tipo_observacion
  tipo_relacion: estructural

- type: DEFINIDO_EN_CONTEXTO_DE
  from_node: Glosario
  to_node: Tarea
  properties:
    - contexto_relacionado
  tipo_relacion: estructural

- type: PUEDE_ESCALAR_A
  from_node: PeligroDetectado
  to_node: TipoIncidente
  properties:
    - condicion
    - activada_por
  cardinalidad: 1:N
  inversa:
    type: PUEDE_SER_CAUSADO_POR
    from_node: TipoIncidente
    to_node: PeligroDetectado
  inferencia: Un mismo peligro puede derivar en IMEN, IMAY o NMS según contexto y severidad.
  tipo_relacion: hipotetica

- type: PUEDE_EVOLUCIONAR_EN
  from_node: PeligroDetectado
  to_node: EventoPrincipal
  properties:
    - condicion
    - activada_por
  tipo_relacion: hipotetica

- type: ESCALAMIENTO_POTENCIAL
  from_node: Observacion
  to_node: Incidente
  properties:
    - condicion
    - activada_por
  tipo_relacion: hipotetica

- type: ES_INSTANCIA_DE
  from_node: EventoPrincipal
  to_node: Incidente
  properties:
    - condicion
    - activada_por
  tipo_relacion: hipotetica

- type: PUEDE_GATILLAR
  from_node: FactorExposicion
  to_node: EventoPrincipal
  properties:
    - condicion
    - activada_por
  tipo_relacion: hipotetica

- type: PUEDE_CONDUCIR_A
  from_node: FactorExposicion
  to_node: Incidente
  properties:
    - condicion
    - activada_por
  tipo_relacion: hipotetica

- type: PUEDE_CONTRIBUIR_A
  from_node: FactorDegradacion
  to_node: Incidente
  properties:
    - condicion
    - activada_por
  tipo_relacion: hipotetica

